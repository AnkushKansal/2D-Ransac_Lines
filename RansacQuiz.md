# Implementing RANSAC

RANSAC stands fors Randomly Sample Consensus, and is a method for detecting outliers in data. RANSAC runs a for a max number of iterations, and returns the model with the best fit. Here we will do a quiz that has you implement RANSAC for fitting a line in 2D point data with outliers. The quiz is located in `src/quiz/ransac2d.cpp` and the function to fill out is `Ransac` which takes in arguments for a point cloud, max iterations to run, and distance tolerance. The point cloud is actually `pcl::PointXYZ` but the z component will be set to zero to make things easy to visualize. The image below shows how the data looks.

<img src="https://github.com/AnkushKansal/Ransac_Lines/blob/master/RansacLines_Output.PNG" width="700" height="400" />

The data was generated by creating a line with points slightly scattered, and then outliers were added by randomly placing points in the scene. We want to be able to identify which points belong to the line that was originally generated and which points are outliers. To do this you will randomly sample two points from the cloud and fit a line between the points. A helpful line equation for this problem can be seen below.

```
Ax + By + C = 0
for point1 (x1, y1), and point2 (x2, y2)
(y1  y2)x + (x2  x1)y + (x1y2  x2y1) = 0
```

After fitting the line you can then iterate through all the points and determine if they are inliers by measuring how far away the point is from the line. You can do this for each iteration keeping track of which fitted line had the highest number of inliers, the line with the most inliers will be the best model. The equation for calculating distance between a point and line is shown below. For further details see, https://brilliant.org/wiki/dot-product-distance-between-point-and-a-line/. 

```
line is Ax + By + C = 0
point (x,y)
d = |A*x+B*y+C|/sqrt(A^2+B^2)
```

Here is the results of doing RANSAC to fit a line from the data above. Inliers are green while outliers are red, the function had a max iteration size of 50, and a distance tolerance of 0.5. The max iteration size depends on the ratio of inliers to the total number of points. The more inliers our data contains the higher the probability of selecting inliers to fit the line to.

<img src="https://github.com/AnkushKansal/Ransac_Lines/blob/master/RansacLines_Output.PNG" width="700" height="400" />


